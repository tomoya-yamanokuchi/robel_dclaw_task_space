# robel_dclaw_task_space


## 方策のobservationとしてtask_space_positionを使う場合の問題
---
- エンドエフェクタの３次元空間中において行動空間を１次元空間のようにして拘束する場合、定義した task_space 上で0と1のような境界部分で非連続性があるためモデル/方策学習に望ましくない
- ロボットの状態が task_space 上に必ずしも位置しているとは限らないためobservationに対して近似が必要になる（バルブと接触状態にある場合には task_space 上から指が外れてしまうことは頻発する）

---
## 行動決定のための擬似的なobservationとしてtask_space_positionを使用する理由
---
- task_space_positionを絶対値の空間で自由に決定してしまうと1次元の拘束が意味を持たなくなる
- 例えば[0, 1]の範囲のtask_spaceなのに0.1から次に急に0.4とかの離れた行動をとってしまうと、明らかに1次元拘束の軌道上から外れてショートカットしたような軌道になってしまう
- これを避けるためには差分入力の形で1stepに動けるtask_space上の距離を制限して行動を実行する必要がある
- 差分行動を決定するためには現在のtask_space_positionが必要となる
- しかし，エンドエフェクタ位置から対応するtask_space_positionを得る逆写像は容易ではない（エンドエフェクタ位置が厳密にtask_spaceの軌道上に乗っかっている保証はないため）
- そこであらかじめtask_space上でobservationとなる点の候補を多めに生成しておき，それらとのノルムを測り、最近棒のものを擬似的な観測として差分制御入力を決定するために用いる
